# PHP

## Sending non-string data

### Sending an array over GET request

In PHP, it is possible to send an array as a GET parameter, instead of a string value. Sloppy code without proper input sanitization might <i>assume</i> that input is always a string thus unexpected bugs can happen when an array is provided. For example, lets say that we want the server to receive the following array

```php
$arr = array(
    0 => '0',
    1 => '1',
    2 => '2',
    'foo' => 'bar'
);
```

Then our GET request would be: <br/>
`GET /test-prj/test.php?arr[]=0&arr[]=1&arr[]=2&arr[foo]=bar`

So lets dump our server-created array `$arr` and the array present in the GET request with the following PHP snippet

```php
if(array_key_exists("arr",$_REQUEST)) {
    var_dump($_REQUEST["arr"]);
}

$arr = array(
    0 => '0',
    1 => '1',
    2 => '2',
    'foo' => 'bar'
);
var_dump($arr);
```

Running the above code, we get the following output, which shows that both arrays are identical

<pre class='xdebug-var-dump' dir='ltr'>
<small>/home/nikos/PhpstormProjects/test-prj/test.php:11:</small>
<b>array</b> <i>(size=4)</i>
  0 <font color='#888a85'>=&gt;</font> <small>string</small> <font color='#cc0000'>'0'</font> <i>(length=1)</i>
  1 <font color='#888a85'>=&gt;</font> <small>string</small> <font color='#cc0000'>'1'</font> <i>(length=1)</i>
  2 <font color='#888a85'>=&gt;</font> <small>string</small> <font color='#cc0000'>'2'</font> <i>(length=1)</i>
  'foo' <font color='#888a85'>=&gt;</font> <small>string</small> <font color='#cc0000'>'bar'</font> <i>(length=3)</i>
</pre><pre class='xdebug-var-dump' dir='ltr'>
<small>/home/nikos/PhpstormProjects/test-prj/test.php:20:</small>
<b>array</b> <i>(size=4)</i>
  0 <font color='#888a85'>=&gt;</font> <small>string</small> <font color='#cc0000'>'0'</font> <i>(length=1)</i>
  1 <font color='#888a85'>=&gt;</font> <small>string</small> <font color='#cc0000'>'1'</font> <i>(length=1)</i>
  2 <font color='#888a85'>=&gt;</font> <small>string</small> <font color='#cc0000'>'2'</font> <i>(length=1)</i>
  'foo' <font color='#888a85'>=&gt;</font> <small>string</small> <font color='#cc0000'>'bar'</font> <i>(length=3)</i>
</pre>

Notes:

* Numbers within the square brackets are not treated as strings, i.e. `?arr[0]=foo` will result in inserting the `foo` string at numeric index `0`
* Values are always treated as strings, i.e. `?arr[]=5` will result in inserting the string value `5`, not a number
  * Same applies for `?arr[]=[]` (Will insert the string value `[]`)
